this["wp"]=this["wp"]||{};this["wp"]["reusableBlocks"]=(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter});}};__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});}
Object.defineProperty(exports,'__esModule',{value:true});};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if((mode&4)&&typeof value==='object'&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,'default',{enumerable:true,value:value});if(mode&2&&typeof value!='string')for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key];}.bind(null,key));return ns;};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s="iqm2");})
({"1ZqX":(function(module,exports){(function(){module.exports=window["wp"]["data"];}());}),"GRId":(function(module,exports){(function(){module.exports=window["wp"]["element"];}());}),"HSyU":(function(module,exports){(function(){module.exports=window["wp"]["blocks"];}());}),"Mmq9":(function(module,exports){(function(){module.exports=window["wp"]["url"];}());}),"Tqx9":(function(module,exports){(function(){module.exports=window["wp"]["primitives"];}());}),"YLtl":(function(module,exports){(function(){module.exports=window["lodash"];}());}),"axFQ":(function(module,exports){(function(){module.exports=window["wp"]["blockEditor"];}());}),"iqm2":(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"store",function(){return store;});__webpack_require__.d(__webpack_exports__,"ReusableBlocksMenuItems",function(){return reusable_blocks_menu_items;});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject);__webpack_require__.d(actions_namespaceObject,"__experimentalConvertBlockToStatic",function(){return __experimentalConvertBlockToStatic;});__webpack_require__.d(actions_namespaceObject,"__experimentalConvertBlocksToReusable",function(){return __experimentalConvertBlocksToReusable;});__webpack_require__.d(actions_namespaceObject,"__experimentalDeleteReusableBlock",function(){return __experimentalDeleteReusableBlock;});__webpack_require__.d(actions_namespaceObject,"__experimentalSetEditingReusableBlock",function(){return __experimentalSetEditingReusableBlock;});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject);__webpack_require__.d(selectors_namespaceObject,"__experimentalIsEditingReusableBlock",function(){return __experimentalIsEditingReusableBlock;});var external_wp_data_=__webpack_require__("1ZqX");var external_lodash_=__webpack_require__("YLtl");var external_wp_blockEditor_=__webpack_require__("axFQ");var external_wp_blocks_=__webpack_require__("HSyU");var external_wp_i18n_=__webpack_require__("l3Sj");const __experimentalConvertBlockToStatic=clientId=>_ref=>{let{registry}=_ref;const oldBlock=registry.select(external_wp_blockEditor_["store"]).getBlock(clientId);const reusableBlock=registry.select('core').getEditedEntityRecord('postType','wp_block',oldBlock.attributes.ref);const newBlocks=Object(external_wp_blocks_["parse"])(Object(external_lodash_["isFunction"])(reusableBlock.content)?reusableBlock.content(reusableBlock):reusableBlock.content);registry.dispatch(external_wp_blockEditor_["store"]).replaceBlocks(oldBlock.clientId,newBlocks);};const __experimentalConvertBlocksToReusable=(clientIds,title)=>async _ref2=>{let{registry,dispatch}=_ref2;const reusableBlock={title:title||Object(external_wp_i18n_["__"])('Untitled Reusable block'),content:Object(external_wp_blocks_["serialize"])(registry.select(external_wp_blockEditor_["store"]).getBlocksByClientId(clientIds)),status:'publish'};const updatedRecord=await registry.dispatch('core').saveEntityRecord('postType','wp_block',reusableBlock);const newBlock=Object(external_wp_blocks_["createBlock"])('core/block',{ref:updatedRecord.id});registry.dispatch(external_wp_blockEditor_["store"]).replaceBlocks(clientIds,newBlock);dispatch.__experimentalSetEditingReusableBlock(newBlock.clientId,true);};const __experimentalDeleteReusableBlock=id=>async _ref3=>{let{registry}=_ref3;const reusableBlock=registry.select('core').getEditedEntityRecord('postType','wp_block',id);if(!reusableBlock){return;}
const allBlocks=registry.select(external_wp_blockEditor_["store"]).getBlocks();const associatedBlocks=allBlocks.filter(block=>Object(external_wp_blocks_["isReusableBlock"])(block)&&block.attributes.ref===id);const associatedBlockClientIds=associatedBlocks.map(block=>block.clientId);if(associatedBlockClientIds.length){registry.dispatch(external_wp_blockEditor_["store"]).removeBlocks(associatedBlockClientIds);}
await registry.dispatch('core').deleteEntityRecord('postType','wp_block',id);};function __experimentalSetEditingReusableBlock(clientId,isEditing){return{type:'SET_EDITING_REUSABLE_BLOCK',clientId,isEditing};}
function isEditingReusableBlock(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let action=arguments.length>1?arguments[1]:undefined;if((action===null||action===void 0?void 0:action.type)==='SET_EDITING_REUSABLE_BLOCK'){return{...state,[action.clientId]:action.isEditing};}
return state;}
var reducer=(Object(external_wp_data_["combineReducers"])({isEditingReusableBlock}));function __experimentalIsEditingReusableBlock(state,clientId){return state.isEditingReusableBlock[clientId];}
const STORE_NAME='core/reusable-blocks';const store=Object(external_wp_data_["createReduxStore"])(STORE_NAME,{actions:actions_namespaceObject,reducer:reducer,selectors:selectors_namespaceObject,__experimentalUseThunks:true});Object(external_wp_data_["register"])(store);var external_wp_element_=__webpack_require__("GRId");var external_wp_components_=__webpack_require__("tI+e");var external_wp_primitives_=__webpack_require__("Tqx9");const reusable_block_reusableBlock=Object(external_wp_element_["createElement"])(external_wp_primitives_["SVG"],{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(external_wp_element_["createElement"])(external_wp_primitives_["Path"],{d:"M7 7.2h8.2L13.5 9l1.1 1.1 3.6-3.6-3.5-4-1.1 1 1.9 2.3H7c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.2-.5zm13.8 4V11h-1.5v.3c0 1.1 0 3.5-1 4.5-.3.3-.7.5-1.3.5H8.8l1.7-1.7-1.1-1.1L5.9 17l3.5 4 1.1-1-1.9-2.3H17c.9 0 1.7-.3 2.3-.9 1.5-1.4 1.5-4.2 1.5-5.6z"}));var reusable_block=(reusable_block_reusableBlock);var external_wp_notices_=__webpack_require__("onLe");var external_wp_coreData_=__webpack_require__("jZUy");function ReusableBlockConvertButton(_ref){let{clientIds,rootClientId}=_ref;const[isModalOpen,setIsModalOpen]=Object(external_wp_element_["useState"])(false);const[title,setTitle]=Object(external_wp_element_["useState"])('');const canConvert=Object(external_wp_data_["useSelect"])(select=>{var _getBlocksByClientId;const{canUser}=select(external_wp_coreData_["store"]);const{getBlocksByClientId,canInsertBlockType}=select(external_wp_blockEditor_["store"]);const blocks=(_getBlocksByClientId=getBlocksByClientId(clientIds))!==null&&_getBlocksByClientId!==void 0?_getBlocksByClientId:[];const isReusable=blocks.length===1&&blocks[0]&&Object(external_wp_blocks_["isReusableBlock"])(blocks[0])&&!!select(external_wp_coreData_["store"]).getEntityRecord('postType','wp_block',blocks[0].attributes.ref);const _canConvert=!isReusable&&canInsertBlockType('core/block',rootClientId)&&blocks.every(block=>!!block&&block.isValid&&Object(external_wp_blocks_["hasBlockSupport"])(block.name,'reusable',true))&&!!canUser('create','blocks');return _canConvert;},[clientIds]);const{__experimentalConvertBlocksToReusable:convertBlocksToReusable}=Object(external_wp_data_["useDispatch"])(store);const{createSuccessNotice,createErrorNotice}=Object(external_wp_data_["useDispatch"])(external_wp_notices_["store"]);const onConvert=Object(external_wp_element_["useCallback"])(async function(reusableBlockTitle){try{await convertBlocksToReusable(clientIds,reusableBlockTitle);createSuccessNotice(Object(external_wp_i18n_["__"])('Reusable block created.'),{type:'snackbar'});}catch(error){createErrorNotice(error.message,{type:'snackbar'});}},[clientIds]);if(!canConvert){return null;}
return Object(external_wp_element_["createElement"])(external_wp_blockEditor_["BlockSettingsMenuControls"],null,_ref2=>{let{onClose}=_ref2;return Object(external_wp_element_["createElement"])(external_wp_element_["Fragment"],null,Object(external_wp_element_["createElement"])(external_wp_components_["MenuItem"],{icon:reusable_block,onClick:()=>{setIsModalOpen(true);}},Object(external_wp_i18n_["__"])('Add to Reusable blocks')),isModalOpen&&Object(external_wp_element_["createElement"])(external_wp_components_["Modal"],{title:Object(external_wp_i18n_["__"])('Create Reusable block'),closeLabel:Object(external_wp_i18n_["__"])('Close'),onRequestClose:()=>{setIsModalOpen(false);setTitle('');},overlayClassName:"reusable-blocks-menu-items__convert-modal"},Object(external_wp_element_["createElement"])("form",{onSubmit:event=>{event.preventDefault();onConvert(title);setIsModalOpen(false);setTitle('');onClose();}},Object(external_wp_element_["createElement"])(external_wp_components_["TextControl"],{label:Object(external_wp_i18n_["__"])('Name'),value:title,onChange:setTitle}),Object(external_wp_element_["createElement"])(external_wp_components_["Flex"],{className:"reusable-blocks-menu-items__convert-modal-actions",justify:"flex-end"},Object(external_wp_element_["createElement"])(external_wp_components_["FlexItem"],null,Object(external_wp_element_["createElement"])(external_wp_components_["Button"],{variant:"secondary",onClick:()=>{setIsModalOpen(false);setTitle('');}},Object(external_wp_i18n_["__"])('Cancel'))),Object(external_wp_element_["createElement"])(external_wp_components_["FlexItem"],null,Object(external_wp_element_["createElement"])(external_wp_components_["Button"],{variant:"primary",type:"submit"},Object(external_wp_i18n_["__"])('Save')))))));});}
var external_wp_url_=__webpack_require__("Mmq9");function ReusableBlocksManageButton(_ref){let{clientId}=_ref;const{isVisible}=Object(external_wp_data_["useSelect"])(select=>{const{getBlock}=select(external_wp_blockEditor_["store"]);const{canUser}=select(external_wp_coreData_["store"]);const reusableBlock=getBlock(clientId);return{isVisible:!!reusableBlock&&Object(external_wp_blocks_["isReusableBlock"])(reusableBlock)&&!!canUser('update','blocks',reusableBlock.attributes.ref)};},[clientId]);const{__experimentalConvertBlockToStatic:convertBlockToStatic}=Object(external_wp_data_["useDispatch"])(store);if(!isVisible){return null;}
return Object(external_wp_element_["createElement"])(external_wp_blockEditor_["BlockSettingsMenuControls"],null,Object(external_wp_element_["createElement"])(external_wp_components_["MenuItem"],{href:Object(external_wp_url_["addQueryArgs"])('edit.php',{post_type:'wp_block'})},Object(external_wp_i18n_["__"])('Manage Reusable blocks')),Object(external_wp_element_["createElement"])(external_wp_components_["MenuItem"],{onClick:()=>convertBlockToStatic(clientId)},Object(external_wp_i18n_["__"])('Convert to regular blocks')));}
var reusable_blocks_manage_button=(ReusableBlocksManageButton);function ReusableBlocksMenuItems(_ref){let{clientIds,rootClientId}=_ref;return Object(external_wp_element_["createElement"])(external_wp_element_["Fragment"],null,Object(external_wp_element_["createElement"])(ReusableBlockConvertButton,{clientIds:clientIds,rootClientId:rootClientId}),clientIds.length===1&&Object(external_wp_element_["createElement"])(reusable_blocks_manage_button,{clientId:clientIds[0]}));}
var reusable_blocks_menu_items=(Object(external_wp_data_["withSelect"])(select=>{const{getSelectedBlockClientIds}=select(external_wp_blockEditor_["store"]);return{clientIds:getSelectedBlockClientIds()};})(ReusableBlocksMenuItems));}),"jZUy":(function(module,exports){(function(){module.exports=window["wp"]["coreData"];}());}),"l3Sj":(function(module,exports){(function(){module.exports=window["wp"]["i18n"];}());}),"onLe":(function(module,exports){(function(){module.exports=window["wp"]["notices"];}());}),"tI+e":(function(module,exports){(function(){module.exports=window["wp"]["components"];}());})});